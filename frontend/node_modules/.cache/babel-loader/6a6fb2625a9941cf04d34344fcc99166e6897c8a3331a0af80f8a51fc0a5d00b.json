{"ast":null,"code":"var _jsxFileName = \"/Users/siddharthan/Desktop/GetMax/PDF-OCR/frontend/src/components/OCRUpload.jsx\",\n  _s = $RefreshSig$();\n// src/components/OCRUpload.jsx\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport '../App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction HorizontalMetaTable({\n  meta\n}) {\n  if (!meta) return null;\n  const keys = Object.keys(meta || {});\n  if (!keys.length) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"metadata-horizontal\",\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"metadata-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: keys.map(k => /*#__PURE__*/_jsxDEV(\"th\", {\n            children: k\n          }, k, false, {\n            fileName: _jsxFileName,\n            lineNumber: 15,\n            columnNumber: 30\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: keys.map(k => {\n            var _meta$k;\n            return /*#__PURE__*/_jsxDEV(\"td\", {\n              children: String((_meta$k = meta[k]) !== null && _meta$k !== void 0 ? _meta$k : '')\n            }, k, false, {\n              fileName: _jsxFileName,\n              lineNumber: 18,\n              columnNumber: 30\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 5\n  }, this);\n}\n_c = HorizontalMetaTable;\nfunction PatientBlock({\n  patient\n}) {\n  var _patient$PatientName;\n  const keys = Object.keys(patient || {});\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"patient-block\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"patient-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Patient: \", (_patient$PatientName = patient[\"Patient Name\"]) !== null && _patient$PatientName !== void 0 ? _patient$PatientName : \"Unknown\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"metadata-vertical\",\n      children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: keys.map(k => {\n          var _patient$k;\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"meta-key\",\n              children: k\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 36,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"meta-val\",\n              children: String((_patient$k = patient[k]) !== null && _patient$k !== void 0 ? _patient$k : '')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 37,\n              columnNumber: 15\n            }, this)]\n          }, k, true, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 13\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n_c2 = PatientBlock;\nfunction ProcedureTables({\n  tables\n}) {\n  if (!tables || Object.keys(tables).length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty\",\n      children: \"No procedure tables found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Procedure / Billing Tables\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), Object.entries(tables).map(([section, rows]) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-block\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: section\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"excel-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 32\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Fee\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 52\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: rows && rows.length > 0 ? rows.map((r, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: r[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r[1]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r[2]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 19\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: 3,\n              style: {\n                textAlign: 'center'\n              },\n              children: \"No rows\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this)]\n    }, section, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_c3 = ProcedureTables;\nfunction DiagnosisTables({\n  tables\n}) {\n  if (!tables || Object.keys(tables).length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"empty\",\n      children: \"No diagnosis tables found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Diagnosis Tables\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), Object.entries(tables).map(([section, rows]) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-block\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: section\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"excel-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 32\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Diagnosis\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 45\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: rows && rows.length > 0 ? rows.map((r, i) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: r[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r[1]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: r[2]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 19\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: 3,\n              style: {\n                textAlign: 'center'\n              },\n              children: \"No rows\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this)]\n    }, section, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_c4 = DiagnosisTables;\nfunction ResultBlock({\n  item\n}) {\n  // item expected: { file_name, patients, procedure_tables, diagnosis_tables, ... }\n  const patients = item.patients || [];\n  const procedures = item.procedure_tables || {};\n  const diagnosis = item.diagnosis_tables || {};\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"result-block\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"file-title\",\n      children: item.file_name || item.filename || \"uploaded file\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"summary\",\n      children: [patients.length, \" patient(s) \\u2022 \", Object.values(procedures).reduce((s, r) => s + ((r === null || r === void 0 ? void 0 : r.length) || 0), 0), \" procedure rows \\u2022 \", Object.values(diagnosis).reduce((s, r) => s + ((r === null || r === void 0 ? void 0 : r.length) || 0), 0), \" diagnosis rows\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Patients\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), patients.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty\",\n        children: \"No patients found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 34\n      }, this) : patients.map((p, i) => /*#__PURE__*/_jsxDEV(PatientBlock, {\n        patient: p\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 106\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginTop: 18\n      },\n      children: /*#__PURE__*/_jsxDEV(ProcedureTables, {\n        tables: procedures\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        marginTop: 18\n      },\n      children: /*#__PURE__*/_jsxDEV(DiagnosisTables, {\n        tables: diagnosis\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"details\", {\n      style: {\n        marginTop: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"summary\", {\n        children: \"Raw response (debug)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          maxHeight: 240,\n          overflow: 'auto',\n          background: '#0b1220',\n          color: '#cbd5e1',\n          padding: 8\n        },\n        children: JSON.stringify(item, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n_c5 = ResultBlock;\nconst OCRUpload = ({\n  auth,\n  setAuth,\n  isAdmin = false\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [files, setFiles] = useState([]);\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [isSignup, setIsSignup] = useState(false);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [message, setMessage] = useState('');\n  const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\n  const api = axios.create({\n    baseURL: API_BASE\n  });\n  api.interceptors.request.use(config => {\n    if (auth !== null && auth !== void 0 && auth.token) config.headers.Authorization = `Bearer ${auth.token}`;\n    return config;\n  });\n  api.interceptors.response.use(response => response, error => {\n    var _error$response;\n    if ([401, 403].includes((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status)) {\n      localStorage.clear();\n      setAuth(null);\n      alert('⚠️ Session expired or access denied. Please log in again.');\n    }\n    return Promise.reject(error);\n  });\n  useEffect(() => {\n    if (auth !== null && auth !== void 0 && auth.token && !isAdmin) {\n      navigate('/', {\n        replace: true\n      });\n    }\n  }, [auth, isAdmin, navigate]);\n  const handleSignup = async () => {\n    try {\n      const res = await api.post('/auth/signup', {\n        username,\n        password\n      });\n      setMessage(res.data.message || 'Signup successful!');\n      const loginRes = await api.post('/auth/login', {\n        username,\n        password\n      });\n      const {\n        token,\n        username: un,\n        role\n      } = loginRes.data;\n      setAuth({\n        token,\n        username: un,\n        role\n      });\n      localStorage.setItem('auth', JSON.stringify({\n        token,\n        username: un,\n        role\n      }));\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setMessage('Signup failed: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message));\n    }\n  };\n  const handleLogin = async () => {\n    try {\n      const res = await api.post('/auth/login', {\n        username,\n        password\n      });\n      if (res.data.token) {\n        const {\n          token,\n          username: un,\n          role\n        } = res.data;\n        setAuth({\n          token,\n          username: un,\n          role\n        });\n        localStorage.setItem('auth', JSON.stringify({\n          token,\n          username: un,\n          role\n        }));\n        setMessage('Login successful!');\n      } else {\n        setMessage('Invalid credentials');\n      }\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setMessage('Login failed: ' + (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || err.message));\n    }\n  };\n  const handleFileChange = e => {\n    const selected = Array.from(e.target.files || []);\n    if (selected.length > 10) {\n      alert('⚠️ You can upload up to 10 files only.');\n      return;\n    }\n    setFiles(selected);\n    setResults([]);\n  };\n  const buildItemFromResponse = (resData, file) => {\n    // Normalize shapes so front-end always sees consistent keys\n    if (!resData) {\n      return {\n        file_name: file.name,\n        patients: [],\n        procedure_tables: {},\n        diagnosis_tables: {},\n        metadata: {}\n      };\n    }\n    // New canonical shape returned by backend (preferred)\n    if (resData.patients || resData.procedure_tables || resData.diagnosis_tables) {\n      return {\n        file_name: resData.file_name || resData.filename || file.name,\n        patients: Array.isArray(resData.patients) ? resData.patients : [],\n        procedure_tables: resData.procedure_tables && typeof resData.procedure_tables === 'object' ? resData.procedure_tables : {},\n        diagnosis_tables: resData.diagnosis_tables && typeof resData.diagnosis_tables === 'object' ? resData.diagnosis_tables : {},\n        metadata: resData.metadata || {}\n      };\n    }\n\n    // older shapes (medical_billing_codes, diagnosis_codes)\n    if (resData.medical_billing_codes || resData.diagnosis_codes) {\n      // put medical_billing_codes into a single Procedures section\n      const procedures = {\n        \"Procedures\": Array.isArray(resData.medical_billing_codes) ? resData.medical_billing_codes.map(r => [r.Code || r.code || \"\", r.Description || r.description || \"\", r.Fee || r.fee || \"\"]) : []\n      };\n      const diags = {\n        \"Diagnosis\": Array.isArray(resData.diagnosis_codes) ? resData.diagnosis_codes.map(d => [d.Type || d.type || \"ICD-10\", d.Code || d.code || \"\", d.Diagnosis || d.diagnosis || d.Description || d.description || \"\"]) : []\n      };\n      return {\n        file_name: resData.file_name || resData.filename || file.name,\n        patients: Array.isArray(resData.patients) ? resData.patients : [],\n        procedure_tables: procedures,\n        diagnosis_tables: diags,\n        metadata: resData.metadata || {}\n      };\n    }\n\n    // fallback: wrap metadata\n    const meta = resData.metadata || resData;\n    if (!meta['File Name']) meta['File Name'] = file.name;\n    return {\n      file_name: meta['File Name'],\n      patients: [],\n      procedure_tables: {},\n      diagnosis_tables: {},\n      metadata: meta\n    };\n  };\n  const handleUploadAll = async () => {\n    if (!files.length) return;\n    setLoading(true);\n    try {\n      const out = [];\n      for (const file of files) {\n        const formData = new FormData();\n        formData.append('file', file);\n        const res = await api.post('/api/ocr', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        const item = buildItemFromResponse(res.data || {}, file);\n        out.push(item);\n      }\n      setResults(out);\n    } catch (err) {\n      console.error('Upload failed:', err);\n      alert('⚠️ Upload failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (!(auth !== null && auth !== void 0 && auth.token) && !isAdmin) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: isSignup ? 'Signup' : 'Login'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Username\",\n        value: username,\n        onChange: e => setUsername(e.target.value),\n        className: \"auth-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value),\n        className: \"auth-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this), isSignup ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"auth-btn\",\n        onClick: handleSignup,\n        children: \"Signup\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"auth-btn\",\n        onClick: handleLogin,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"toggle-btn\",\n        onClick: () => {\n          setIsSignup(!isSignup);\n          setMessage('');\n        },\n        children: isSignup ? 'Already have an account? Login' : 'No account? Signup'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"auth-message\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"main-heading\",\n        children: isAdmin ? '📂 Admin OCR Upload Tool' : '📄 File OCR Extraction Tool'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"upload-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"file-upload\",\n        className: \"upload-label\",\n        children: \"Upload up to 10 files:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        id: \"file-upload\",\n        accept: \".pdf,.jpg,.jpeg,.png,.doc,.docx\",\n        multiple: true,\n        onChange: handleFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-row\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"upload-btn\",\n          onClick: handleUploadAll,\n          disabled: loading,\n          children: loading ? 'Processing...' : 'Upload All'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this), files.length > 0 && /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"file-preview\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"section-heading\",\n        children: \"\\uD83D\\uDCC1 Selected Files\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 63\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"file-list\",\n        children: files.map((file, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"\\uD83D\\uDCCE \", file.name]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 167\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 117\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 29\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"loading-text\",\n      children: \"\\u23F3 Extracting tables...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 19\n    }, this), results.length > 0 && /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"results-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"section-heading\",\n        children: \"\\uD83D\\uDCCA Parsed Tables\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 11\n      }, this), results.map((item, idx) => /*#__PURE__*/_jsxDEV(ResultBlock, {\n        item: item\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 39\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 307,\n    columnNumber: 5\n  }, this);\n};\n_s(OCRUpload, \"c0rBAgRCrtZyqNAoAsWJ9oX7NMU=\", false, function () {\n  return [useNavigate];\n});\n_c6 = OCRUpload;\nexport default OCRUpload;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"HorizontalMetaTable\");\n$RefreshReg$(_c2, \"PatientBlock\");\n$RefreshReg$(_c3, \"ProcedureTables\");\n$RefreshReg$(_c4, \"DiagnosisTables\");\n$RefreshReg$(_c5, \"ResultBlock\");\n$RefreshReg$(_c6, \"OCRUpload\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsxDEV","_jsxDEV","HorizontalMetaTable","meta","keys","Object","length","className","children","map","k","fileName","_jsxFileName","lineNumber","columnNumber","_meta$k","String","_c","PatientBlock","patient","_patient$PatientName","_patient$k","_c2","ProcedureTables","tables","entries","section","rows","r","i","colSpan","style","textAlign","_c3","DiagnosisTables","_c4","ResultBlock","item","patients","procedures","procedure_tables","diagnosis","diagnosis_tables","file_name","filename","values","reduce","s","p","marginTop","maxHeight","overflow","background","color","padding","JSON","stringify","_c5","OCRUpload","auth","setAuth","isAdmin","_s","navigate","files","setFiles","results","setResults","loading","setLoading","isSignup","setIsSignup","username","setUsername","password","setPassword","message","setMessage","API_BASE","process","env","REACT_APP_API_BASE","api","create","baseURL","interceptors","request","use","config","token","headers","Authorization","response","error","_error$response","includes","status","localStorage","clear","alert","Promise","reject","replace","handleSignup","res","post","data","loginRes","un","role","setItem","err","_err$response","_err$response$data","handleLogin","_err$response2","_err$response2$data","handleFileChange","e","selected","Array","from","target","buildItemFromResponse","resData","file","name","metadata","isArray","medical_billing_codes","diagnosis_codes","Code","code","Description","description","Fee","fee","diags","d","Type","type","Diagnosis","handleUploadAll","out","formData","FormData","append","push","console","placeholder","value","onChange","onClick","htmlFor","id","accept","multiple","disabled","idx","_c6","$RefreshReg$"],"sources":["/Users/siddharthan/Desktop/GetMax/PDF-OCR/frontend/src/components/OCRUpload.jsx"],"sourcesContent":["// src/components/OCRUpload.jsx\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport '../App.css';\n\nfunction HorizontalMetaTable({ meta }) {\n  if (!meta) return null;\n  const keys = Object.keys(meta || {});\n  if (!keys.length) return null;\n  return (\n    <div className=\"metadata-horizontal\">\n      <table className=\"metadata-table\">\n        <thead>\n          <tr>{keys.map(k => <th key={k}>{k}</th>)}</tr>\n        </thead>\n        <tbody>\n          <tr>{keys.map(k => <td key={k}>{String(meta[k] ?? '')}</td>)}</tr>\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nfunction PatientBlock({ patient }) {\n  const keys = Object.keys(patient || {});\n  return (\n    <div className=\"patient-block\">\n      <div className=\"patient-header\">\n        <h4>Patient: {patient[\"Patient Name\"] ?? \"Unknown\"}</h4>\n      </div>\n      <table className=\"metadata-vertical\">\n        <tbody>\n          {keys.map(k => (\n            <tr key={k}>\n              <th className=\"meta-key\">{k}</th>\n              <td className=\"meta-val\">{String(patient[k] ?? '')}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nfunction ProcedureTables({ tables }) {\n  if (!tables || Object.keys(tables).length === 0) {\n    return <div className=\"empty\">No procedure tables found.</div>;\n  }\n  return (\n    <div>\n      <h3>Procedure / Billing Tables</h3>\n      {Object.entries(tables).map(([section, rows]) => (\n        <div key={section} className=\"table-block\">\n          <h4>{section}</h4>\n          <table className=\"excel-table\">\n            <thead>\n              <tr><th>Code</th><th>Description</th><th>Fee</th></tr>\n            </thead>\n            <tbody>\n              {rows && rows.length > 0 ? rows.map((r, i) => (\n                <tr key={i}>\n                  <td>{r[0]}</td>\n                  <td>{r[1]}</td>\n                  <td>{r[2]}</td>\n                </tr>\n              )) : (\n                <tr><td colSpan={3} style={{ textAlign: 'center' }}>No rows</td></tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction DiagnosisTables({ tables }) {\n  if (!tables || Object.keys(tables).length === 0) {\n    return <div className=\"empty\">No diagnosis tables found.</div>;\n  }\n  return (\n    <div>\n      <h3>Diagnosis Tables</h3>\n      {Object.entries(tables).map(([section, rows]) => (\n        <div key={section} className=\"table-block\">\n          <h4>{section}</h4>\n          <table className=\"excel-table\">\n            <thead>\n              <tr><th>Type</th><th>Code</th><th>Diagnosis</th></tr>\n            </thead>\n            <tbody>\n              {rows && rows.length > 0 ? rows.map((r, i) => (\n                <tr key={i}>\n                  <td>{r[0]}</td>\n                  <td>{r[1]}</td>\n                  <td>{r[2]}</td>\n                </tr>\n              )) : (\n                <tr><td colSpan={3} style={{ textAlign: 'center' }}>No rows</td></tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction ResultBlock({ item }) {\n  // item expected: { file_name, patients, procedure_tables, diagnosis_tables, ... }\n  const patients = item.patients || [];\n  const procedures = item.procedure_tables || {};\n  const diagnosis = item.diagnosis_tables || {};\n\n  return (\n    <div className=\"result-block\">\n      <h2 className=\"file-title\">{item.file_name || item.filename || \"uploaded file\"}</h2>\n      <div className=\"summary\">{patients.length} patient(s) • {Object.values(procedures).reduce((s, r) => s + (r?.length || 0), 0)} procedure rows • {Object.values(diagnosis).reduce((s, r) => s + (r?.length || 0), 0)} diagnosis rows</div>\n\n      {/* Patients */}\n      <section>\n        <h3>Patients</h3>\n        {patients.length === 0 ? <div className=\"empty\">No patients found</div> : patients.map((p, i) => <PatientBlock key={i} patient={p} />)}\n      </section>\n\n      {/* Procedure / Billing tables (global) */}\n      <section style={{ marginTop: 18 }}>\n        <ProcedureTables tables={procedures} />\n      </section>\n\n      {/* Diagnosis tables */}\n      <section style={{ marginTop: 18 }}>\n        <DiagnosisTables tables={diagnosis} />\n      </section>\n\n      <details style={{ marginTop: 12 }}>\n        <summary>Raw response (debug)</summary>\n        <pre style={{ maxHeight: 240, overflow: 'auto', background: '#0b1220', color: '#cbd5e1', padding: 8 }}>\n          {JSON.stringify(item, null, 2)}\n        </pre>\n      </details>\n    </div>\n  );\n}\n\nconst OCRUpload = ({ auth, setAuth, isAdmin = false }) => {\n  const navigate = useNavigate();\n  const [files, setFiles] = useState([]);\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const [isSignup, setIsSignup] = useState(false);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [message, setMessage] = useState('');\n\n  const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:5000';\n  const api = axios.create({ baseURL: API_BASE });\n\n  api.interceptors.request.use((config) => {\n    if (auth?.token) config.headers.Authorization = `Bearer ${auth.token}`;\n    return config;\n  });\n  api.interceptors.response.use(\n    (response) => response,\n    (error) => {\n      if ([401, 403].includes(error.response?.status)) {\n        localStorage.clear();\n        setAuth(null);\n        alert('⚠️ Session expired or access denied. Please log in again.');\n      }\n      return Promise.reject(error);\n    }\n  );\n\n  useEffect(() => {\n    if (auth?.token && !isAdmin) {\n      navigate('/', { replace: true });\n    }\n  }, [auth, isAdmin, navigate]);\n\n  const handleSignup = async () => {\n    try {\n      const res = await api.post('/auth/signup', { username, password });\n      setMessage(res.data.message || 'Signup successful!');\n      const loginRes = await api.post('/auth/login', { username, password });\n      const { token, username: un, role } = loginRes.data;\n      setAuth({ token, username: un, role });\n      localStorage.setItem('auth', JSON.stringify({ token, username: un, role }));\n    } catch (err) {\n      setMessage('Signup failed: ' + (err.response?.data?.error || err.message));\n    }\n  };\n\n  const handleLogin = async () => {\n    try {\n      const res = await api.post('/auth/login', { username, password });\n      if (res.data.token) {\n        const { token, username: un, role } = res.data;\n        setAuth({ token, username: un, role });\n        localStorage.setItem('auth', JSON.stringify({ token, username: un, role }));\n        setMessage('Login successful!');\n      } else {\n        setMessage('Invalid credentials');\n      }\n    } catch (err) {\n      setMessage('Login failed: ' + (err.response?.data?.error || err.message));\n    }\n  };\n\n  const handleFileChange = (e) => {\n    const selected = Array.from(e.target.files || []);\n    if (selected.length > 10) {\n      alert('⚠️ You can upload up to 10 files only.');\n      return;\n    }\n    setFiles(selected);\n    setResults([]);\n  };\n\n  const buildItemFromResponse = (resData, file) => {\n    // Normalize shapes so front-end always sees consistent keys\n    if (!resData) {\n      return { file_name: file.name, patients: [], procedure_tables: {}, diagnosis_tables: {}, metadata: {} };\n    }\n    // New canonical shape returned by backend (preferred)\n    if (resData.patients || resData.procedure_tables || resData.diagnosis_tables) {\n      return {\n        file_name: resData.file_name || resData.filename || file.name,\n        patients: Array.isArray(resData.patients) ? resData.patients : [],\n        procedure_tables: (resData.procedure_tables && typeof resData.procedure_tables === 'object') ? resData.procedure_tables : {},\n        diagnosis_tables: (resData.diagnosis_tables && typeof resData.diagnosis_tables === 'object') ? resData.diagnosis_tables : {},\n        metadata: resData.metadata || {}\n      };\n    }\n\n    // older shapes (medical_billing_codes, diagnosis_codes)\n    if (resData.medical_billing_codes || resData.diagnosis_codes) {\n      // put medical_billing_codes into a single Procedures section\n      const procedures = { \"Procedures\": Array.isArray(resData.medical_billing_codes) ? resData.medical_billing_codes.map(r => [r.Code || r.code || \"\", r.Description || r.description || \"\", r.Fee || r.fee || \"\"]) : [] };\n      const diags = { \"Diagnosis\": Array.isArray(resData.diagnosis_codes) ? resData.diagnosis_codes.map(d => [d.Type || d.type || \"ICD-10\", d.Code || d.code || \"\", d.Diagnosis || d.diagnosis || d.Description || d.description || \"\"]) : [] };\n      return {\n        file_name: resData.file_name || resData.filename || file.name,\n        patients: Array.isArray(resData.patients) ? resData.patients : [],\n        procedure_tables: procedures,\n        diagnosis_tables: diags,\n        metadata: resData.metadata || {}\n      };\n    }\n\n    // fallback: wrap metadata\n    const meta = resData.metadata || resData;\n    if (!meta['File Name']) meta['File Name'] = file.name;\n    return {\n      file_name: meta['File Name'],\n      patients: [],\n      procedure_tables: {},\n      diagnosis_tables: {},\n      metadata: meta\n    };\n  };\n\n  const handleUploadAll = async () => {\n    if (!files.length) return;\n    setLoading(true);\n    try {\n      const out = [];\n      for (const file of files) {\n        const formData = new FormData();\n        formData.append('file', file);\n        const res = await api.post('/api/ocr', formData, {\n          headers: { 'Content-Type': 'multipart/form-data' },\n        });\n        const item = buildItemFromResponse(res.data || {}, file);\n        out.push(item);\n      }\n      setResults(out);\n    } catch (err) {\n      console.error('Upload failed:', err);\n      alert('⚠️ Upload failed. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!auth?.token && !isAdmin) {\n    return (\n      <div className=\"container\">\n        <h2>{isSignup ? 'Signup' : 'Login'}</h2>\n        <input type=\"text\" placeholder=\"Username\" value={username} onChange={(e) => setUsername(e.target.value)} className=\"auth-input\" />\n        <input type=\"password\" placeholder=\"Password\" value={password} onChange={(e) => setPassword(e.target.value)} className=\"auth-input\" />\n        {isSignup ? (\n          <button className=\"auth-btn\" onClick={handleSignup}>Signup</button>\n        ) : (\n          <button className=\"auth-btn\" onClick={handleLogin}>Login</button>\n        )}\n        <button className=\"toggle-btn\" onClick={() => { setIsSignup(!isSignup); setMessage(''); }}>\n          {isSignup ? 'Already have an account? Login' : 'No account? Signup'}\n        </button>\n        {message && <p className=\"auth-message\">{message}</p>}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\">\n      <header><h2 className=\"main-heading\">{isAdmin ? '📂 Admin OCR Upload Tool' : '📄 File OCR Extraction Tool'}</h2></header>\n\n      <section className=\"upload-section\">\n        <label htmlFor=\"file-upload\" className=\"upload-label\">Upload up to 10 files:</label>\n        <input type=\"file\" id=\"file-upload\" accept=\".pdf,.jpg,.jpeg,.png,.doc,.docx\" multiple onChange={handleFileChange} />\n        <div className=\"button-row\">\n          <button className=\"upload-btn\" onClick={handleUploadAll} disabled={loading}>{loading ? 'Processing...' : 'Upload All'}</button>\n        </div>\n      </section>\n\n      {files.length > 0 && (<section className=\"file-preview\"><h3 className=\"section-heading\">📁 Selected Files</h3><ul className=\"file-list\">{files.map((file, i) => <li key={i}>📎 {file.name}</li>)}</ul></section>)}\n\n      {loading && <p className=\"loading-text\">⏳ Extracting tables...</p>}\n\n      {results.length > 0 && (\n        <section className=\"results-section\">\n          <h3 className=\"section-heading\">📊 Parsed Tables</h3>\n          {results.map((item, idx) => <ResultBlock key={idx} item={item} />)}\n        </section>\n      )}\n\n    </div>\n  );\n};\n\nexport default OCRUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}